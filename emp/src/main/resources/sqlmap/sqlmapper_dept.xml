<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace = "com.dw.emp.mapper.DeptMapper">
	<select id="SelectDeptJoin" resultType="map">
		SELECT
			d.dname,
			d.loc,
			d.deptno,
			count(e.empno)
		FROM dept as d
		INNER JOIN emp AS e
		ON d.deptno = e.deptno
		GROUP BY e.deptno
	</select>
	
	
	<!-- 부서 추가 -->
	<insert id="InsertDept">
		INSERT INTO dept
		(
			<if test="dname != null">
				dname				
			</if>,
			<if test="loc != null">
				loc
			</if>,
			<if test="deptno != null">
				deptno
			</if>
			
		)
		VALUES
		(
			
			<if test="dname != null">
				#{dname}
			</if>,
			<if test="loc != null">
				#{loc}
			</if>,
			<if test="deptno != null">
				#{deptno}
			</if>
			
		)
	</insert>
	
	<!-- 부서 정보 수정 -->
	<update id="UpdateDept">
		UPDATE dept 
		SET 
			dname = #{dname},
			loc = #{loc}
		
		WHERE deptno = #{deptno};
	
	</update>
	<!-- 부서 삭제 -->
	<update id="deleteDept">
		DELETE
		FROM dept
		WHERE deptno = #{deptno}
	</update>
	
	
</mapper>